---
title: "R for Data Science Day 2: Data Viz Exercises"
author: Darya Vanichkina
date: '2019-12-23'
slug: r-for-data-science-day-2
categories:
  - Certifications
tags:
  - tidyverse
  - R
  - r4ds
description: 'Working through the R for Data Science Exercises'
externalLink: ''
series: [R4DS]
---



<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.2.1     ✓ purrr   0.3.3
## ✓ tibble  2.1.3     ✓ dplyr   0.8.3
## ✓ tidyr   1.0.0     ✓ stringr 1.4.0
## ✓ readr   1.3.1     ✓ forcats 0.4.0</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code># devtools::install_github(&quot;thomasp85/patchwork&quot;)
library(patchwork)</code></pre>
<div id="exercises-3.2.4" class="section level2">
<h2>Exercises 3.2.4</h2>
<ol style="list-style-type: decimal">
<li>Run ggplot(data = mpg). What do you see?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3241%20-1.png" width="672" /></p>
<p>Nothing, because we haven’t selected a geom.</p>
<ol start="2" style="list-style-type: decimal">
<li>How many rows are in mpg? How many columns?</li>
</ol>
<pre class="r"><code>nrow(mpg)</code></pre>
<pre><code>## [1] 234</code></pre>
<pre class="r"><code>ncol(mpg)</code></pre>
<pre><code>## [1] 11</code></pre>
<pre class="r"><code>dim(mpg)</code></pre>
<pre><code>## [1] 234  11</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>What does the drv variable describe? Read the help for ?mpg to find out.</li>
</ol>
<pre class="r"><code>?mpg</code></pre>
<ul>
<li>f = front-wheel drive, r = rear wheel drive, 4 = 4wd</li>
</ul>
<p>4.Make a scatterplot of hwy vs cyl.</p>
<pre class="r"><code># set all ggplot figures to use minimal theme
theme_set(theme_classic())
mpg %&gt;%
  ggplot(aes(x = cyl, y = hwy)) + geom_point()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3244-1.png" width="672" /></p>
<pre class="r"><code># use transparency and jitter to make the points separate better
mpg %&gt;%
  ggplot(aes(x = cyl, y = hwy)) + geom_jitter(width = 0.4, alpha = 0.5)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3244-2.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li>What happens if you make a scatterplot of class vs drv? Why is the plot not useful?</li>
</ol>
<pre class="r"><code>theme_set(theme_minimal())
mpg %&gt;%
  ggplot(aes(x = class, y = drv)) + geom_point()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3245-1.png" width="672" /></p>
<p>Because it is plotting a category vs a category, so most of the space in the plot cannot be filled. However, I’d argue that it’s not completely useless as it does show that all 2 seater cars have rear wheel drive, while all minivans have forward wheel drive.</p>
<p>The barplot below probably presents a better visualisation, as it also shows that we may not have sampled enough 2 seater vehicles to identify whether any of them could possibly have forward drive. Having said that, I do like the dot-plot visualisation as well.</p>
<pre class="r"><code>theme_set(theme_minimal())
mpg %&gt;%
  ggplot(aes(x = class, fill = drv)) + geom_bar()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3245b-1.png" width="672" /></p>
<hr />
</div>
<div id="excercises-3.3.1" class="section level2">
<h2>Excercises 3.3.1</h2>
<ol style="list-style-type: decimal">
<li>What’s gone wrong with this code? Why are the points not blue?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = &quot;blue&quot;))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3331-1.png" width="672" /></p>
<p>Because color has been set within the aesthetic, so ggplot is assuming that we want to set the value of the colour aesthetic to the string blue. To fix:</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy),color = &quot;blue&quot;)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3331b-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Which variables in mpg are categorical? Which variables are continuous? (Hint: type ?mpg to read the documentation for the dataset). How can you see this information when you run mpg?</li>
</ol>
<pre class="r"><code>glimpse(mpg)</code></pre>
<pre><code>## Observations: 234
## Variables: 11
## $ manufacturer &lt;chr&gt; &quot;audi&quot;, &quot;audi&quot;, &quot;audi&quot;, &quot;audi&quot;, &quot;audi&quot;, &quot;audi&quot;, &quot;audi&quot;, …
## $ model        &lt;chr&gt; &quot;a4&quot;, &quot;a4&quot;, &quot;a4&quot;, &quot;a4&quot;, &quot;a4&quot;, &quot;a4&quot;, &quot;a4&quot;, &quot;a4 quattro&quot;, …
## $ displ        &lt;dbl&gt; 1.8, 1.8, 2.0, 2.0, 2.8, 2.8, 3.1, 1.8, 1.8, 2.0, 2.0, 2…
## $ year         &lt;int&gt; 1999, 1999, 2008, 2008, 1999, 1999, 2008, 1999, 1999, 20…
## $ cyl          &lt;int&gt; 4, 4, 4, 4, 6, 6, 6, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, 8,…
## $ trans        &lt;chr&gt; &quot;auto(l5)&quot;, &quot;manual(m5)&quot;, &quot;manual(m6)&quot;, &quot;auto(av)&quot;, &quot;aut…
## $ drv          &lt;chr&gt; &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;…
## $ cty          &lt;int&gt; 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, …
## $ hwy          &lt;int&gt; 29, 29, 31, 30, 26, 26, 27, 26, 25, 28, 27, 25, 25, 25, …
## $ fl           &lt;chr&gt; &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;p&quot;, &quot;…
## $ class        &lt;chr&gt; &quot;compact&quot;, &quot;compact&quot;, &quot;compact&quot;, &quot;compact&quot;, &quot;compact&quot;, &quot;…</code></pre>
<p>We can use the <code>glimpse()</code> command, which will show us the type of each variable. Those that are ‘chr’ (character) are categorical, whereas those that are ‘int’ (integer) are continuous.</p>
<ol start="3" style="list-style-type: decimal">
<li>Map a continuous variable to color, size, and shape. How do these aesthetics behave differently for categorical vs. continuous variables?</li>
</ol>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, col = hwy)) + geom_point() </code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3333a-1.png" width="672" /></p>
<p>For a continuous variable, colour is use to represent a gradient.</p>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, size = hwy)) + geom_point() </code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3333b-1.png" width="672" />
Size becomes bigger as the values get bigger</p>
<pre class="r"><code># mpg %&gt;% ggplot(aes(x = displ, y = hwy, shape = hwy)) + geom_point() </code></pre>
<p>Shape gives an error.</p>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, col = manufacturer)) + geom_point() </code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3333d-1.png" width="672" /></p>
<p>Colour colours the points by the levels of the category.</p>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, size = manufacturer)) + geom_point() </code></pre>
<pre><code>## Warning: Using size for a discrete variable is not advised.</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3333e-1.png" width="672" />
Size is not advised, but still works.</p>
<pre class="r"><code># mpg %&gt;% ggplot(aes(x = displ, y = hwy, shape = manufacturer)) + geom_point()
# Shape by default throws an error, since only 6 shapes are allowed
mpg %&gt;% ggplot(aes(x = displ, y = hwy, shape = manufacturer)) + geom_point() + scale_shape_manual(values=1:length(unique(mpg$manufacturer)))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3333f-1.png" width="672" /></p>
<p>Shape by default doesn’t work, but can be coerced by using <code>scale_shape_manual()</code> to present more than 6 shapes.</p>
<ol start="4" style="list-style-type: decimal">
<li>What happens if you map the same variable to multiple aesthetics?</li>
</ol>
<p>It gets mapped!</p>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, shape = manufacturer, col=manufacturer)) + geom_point() + scale_shape_manual(values=1:length(unique(mpg$manufacturer)))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3334-1.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li>What does the stroke aesthetic do? What shapes does it work with? (Hint: use ?geom_point)</li>
</ol>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, stroke = displ)) + geom_point()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3335-1.png" width="672" /></p>
<p>Increases the thickness of the stroke as values of the variable get larger.</p>
<ol start="6" style="list-style-type: decimal">
<li>What happens if you map an aesthetic to something other than a variable name, like aes(colour = displ &lt; 5)? Note, you’ll also need to specify x and y.</li>
</ol>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy, colour = displ &lt; 5)) + geom_point()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3336-1.png" width="672" /></p>
<p>The expression will be evaluated, and the variable plotted will be (displ&lt;5).</p>
<hr />
</div>
<div id="exercises-3.5.1-exercises---facets" class="section level2">
<h2>Exercises 3.5.1 Exercises - Facets</h2>
<ol style="list-style-type: decimal">
<li>What happens if you facet on a continuous variable?</li>
</ol>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = displ, y = hwy)) + geom_point() + facet_grid(~hwy)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3511-1.png" width="672" /></p>
<p>It treats it as a categorical - so bad things!</p>
<ol start="2" style="list-style-type: decimal">
<li>What do the empty cells in plot with facet_grid(drv ~ cyl) mean? How do they relate to this plot?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = drv, y = cyl))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3512-1.png" width="672" /></p>
<p>There are no cars with cyl == 7 or (drv == r where cyl ==4) or (cyl ==5 and drv ==4 or drv == r).</p>
<ol start="3" style="list-style-type: decimal">
<li>What plots does the following code make? What does . do?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) + facet_grid(drv ~ .)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3513-1.png" width="672" /></p>
<p><code>.</code> says not to faced on that dimension.</p>
<ol start="4" style="list-style-type: decimal">
<li><p>Take the first faceted plot in this section. What are the advantages to using faceting instead of the colour aesthetic? What are the disadvantages? How might the balance change if you had a larger dataset?</p>
<p>ggplot(data = mpg) +geom_point(mapping = aes(x = displ, y = hwy)) + facet_wrap(~ class, nrow = 2)</p></li>
</ol>
<p>Cleaner to see the trend in each level of displ. If we had a larger dataset this would be more important, as overlaying all of the points would create a data blob instead of a meaningful visualisation.</p>
<p>5.Read <code>?facet_wrap</code>. What does nrow do? What does ncol do? What other options control the layout of the individual panels? Why doesn’t <code>facet_grid()</code> have <code>nrow</code> and <code>ncol</code> arguments?</p>
<p><code>nrow</code> and <code>ncol</code> specify how many rows and columns we want our panels to be split into. <code>facet_grid()</code> doesn’t do this, as it uses the number of factor levels in the data we’re faceting by to cleanly present this automatically.</p>
<p><code>scales</code> is veru useful as it allows us to have free scales (i.e. different scales) for each of our individual plots.</p>
<ol start="6" style="list-style-type: decimal">
<li>When using facet_grid() you should usually put the variable with more unique levels in the columns. Why?</li>
</ol>
<p>Because that allows us to better see the spread of the data.</p>
</div>
<div id="exercises-3.6-geometric-objects" class="section level2">
<h2>Exercises 3.6 Geometric objects</h2>
<ol style="list-style-type: decimal">
<li>What geom would you use to draw a line chart ? A boxplot ? A histogram? An area chart?</li>
</ol>
<ul>
<li>geom_line()</li>
<li>geom_boxplot()</li>
<li>geom_histogram()</li>
<li>geom_area()</li>
</ul>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) + geom_point() + geom_smooth(se = FALSE 
    )</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3612-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does show.legend = FALSE do? What happens if you remove it? Why do you think I used it earlier in the chapter?</li>
</ol>
<p>Hides the legend for that geom layer. Note that if you want to hide the legend completely, you need to include it in each geom level we present, so geom_point(show.legend = FALSE) and geom_smooth(show.legend = FALSE) for the plot above.</p>
<ol start="3" style="list-style-type: decimal">
<li>What does the se argument to geom_smooth() do?</li>
</ol>
<p>Specifies whether to show the standard error.</p>
<ol start="4" style="list-style-type: decimal">
<li>Will these two graphs look different? Why/why not?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
      geom_point() + 
      geom_smooth()</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3614-1.png" width="672" /></p>
<pre class="r"><code>ggplot() + 
      geom_point(data = mpg, mapping = aes(x = displ, y = hwy)) + 
      geom_smooth(data = mpg, mapping = aes(x = displ, y = hwy))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3614-2.png" width="672" /></p>
<p>No, they should be identical, because the specify the same x/y aesthetics for both geoms.</p>
<ol start="5" style="list-style-type: decimal">
<li>Recreate the R code necessary to generate the following graphs.</li>
</ol>
<p>I code the six plots to variables first, and then use the <a href="https://patchwork.data-imaginist.com/">patchwork</a> library to present them in one figure below:</p>
<pre class="r"><code>one &lt;- mpg %&gt;% ggplot(aes(x = displ, y = hwy)) + geom_point() + geom_smooth(se=FALSE)
two &lt;- mpg %&gt;% ggplot(aes(x = displ, y = hwy)) + geom_point() + geom_smooth(aes(fill = drv), se=FALSE, show.legend = F)
three &lt;- mpg %&gt;% ggplot(aes(x = displ, y = hwy,col = drv)) + geom_point() + geom_smooth(se = F)
four &lt;- mpg %&gt;% ggplot() + geom_point(aes(x = displ, y = hwy,col = drv)) + geom_smooth(aes(x = displ, y = hwy), se = F)
five &lt;- mpg %&gt;% ggplot(aes(x = displ, y = hwy,col = drv, linetype = drv)) + geom_point() + geom_smooth(se = F)
six &lt;- mpg %&gt;% ggplot(aes(x = displ, y = hwy, fill = drv)) + geom_point(shape = 21, col = &quot;white&quot;, stroke = 2, size = 3) + theme_gray()

one + two + three + four + five + six+ plot_layout(ncol = 2)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3615a-1.png" width="672" /></p>
</div>
<div id="exercises-3.7-statistical-transformations-exercises" class="section level2">
<h2>Exercises 3.7 Statistical transformations Exercises</h2>
<p>1.What is the default geom associated with stat_summary()? How could you rewrite the previous plot to use that geom function instead of the stat function?</p>
<ul>
<li>geom_pointrange</li>
</ul>
<pre class="r"><code># original
ggplot(data = diamonds) +
  stat_summary(
    mapping = aes(x = cut, y = depth),
    fun.ymin = min,
    fun.ymax = max,
    fun.y = median
  )</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3711-1.png" width="672" /></p>
<pre class="r"><code>#modified
ggplot(data = diamonds, aes(x = cut, y = depth)) + 
  geom_pointrange(stat = &quot;summary&quot;,
    fun.ymin = min,
    fun.ymax = max,
    fun.y = median)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3711-2.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does geom_col() do? How is it different to geom_bar()?</li>
</ol>
<p>It is the equivalent of geom_bar(stat=“identity”).</p>
<ol start="3" style="list-style-type: decimal">
<li>Most geoms and stats come in pairs that are almost always used in concert. Read through the documentation and make a list of all the pairs. What do they have in common?</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">geom</th>
<th align="left">stat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">geom_bar()</td>
<td align="left">stat_count()</td>
</tr>
<tr class="even">
<td align="left">geom_bin2d()</td>
<td align="left">stat_bin_2d()</td>
</tr>
<tr class="odd">
<td align="left">geom_boxplot()</td>
<td align="left">stat_boxplot()</td>
</tr>
<tr class="even">
<td align="left">geom_contour()</td>
<td align="left">stat_contour()</td>
</tr>
<tr class="odd">
<td align="left">geom_count()</td>
<td align="left">stat_sum()</td>
</tr>
<tr class="even">
<td align="left">geom_density()</td>
<td align="left">stat_density()</td>
</tr>
<tr class="odd">
<td align="left">geom_density_2d()</td>
<td align="left">stat_density_2d()</td>
</tr>
<tr class="even">
<td align="left">geom_hex()</td>
<td align="left">stat_hex()</td>
</tr>
<tr class="odd">
<td align="left">geom_freqpoly()</td>
<td align="left">stat_bin()</td>
</tr>
<tr class="even">
<td align="left">geom_histogram()</td>
<td align="left">stat_bin()</td>
</tr>
<tr class="odd">
<td align="left">geom_qq_line()</td>
<td align="left">stat_qq_line()</td>
</tr>
<tr class="even">
<td align="left">geom_qq()</td>
<td align="left">stat_qq()</td>
</tr>
<tr class="odd">
<td align="left">geom_quantile()</td>
<td align="left">stat_quantile()</td>
</tr>
<tr class="even">
<td align="left">geom_smooth()</td>
<td align="left">stat_smooth()</td>
</tr>
<tr class="odd">
<td align="left">geom_violin()</td>
<td align="left">stat_violin()</td>
</tr>
<tr class="even">
<td align="left">geom_sf()</td>
<td align="left">stat_sf()</td>
</tr>
</tbody>
</table>
<p>Many (but not all) have similar names.</p>
<ol start="4" style="list-style-type: decimal">
<li>What variables does stat_smooth() compute? What parameters control its behaviour?</li>
</ol>
<ul>
<li>y - predicted value</li>
<li>ymin - lower pointwise confidence interval around the mean</li>
<li>ymax -upper pointwise confidence interval around the mean</li>
<li>se - standard error</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>In our proportion bar chart, we need to set group = 1. Why? In other words what is the problem with these two graphs?</li>
</ol>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, y = ..prop..))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3715-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = color, y = ..prop..))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3715-2.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, y = ..prop.., fill = color, group = 1))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3715-3.png" width="672" /></p>
<p>The proportions are calculated within the groups, so it’s always presented out of 100%. To get the “best” visualisation:</p>
<pre class="r"><code>ggplot(data = diamonds) +
  geom_bar(aes(x = cut, y = ..count.. / sum(..count..), fill = color))</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex375b-1.png" width="672" /></p>
</div>
<div id="exercises-3.8-position-adjustments" class="section level2">
<h2>Exercises 3.8 Position adjustments</h2>
<ol style="list-style-type: decimal">
<li><p>What is the problem with this plot? How could you improve it?</p>
<p>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
geom_point()</p></li>
</ol>
<pre class="r"><code> ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + 
      geom_jitter(height = 1, width  = 1, alpha = 0.6)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/ex3811-1.png" width="672" /></p>
<p>The points overlap. To address: use jitter and alpha.</p>
<ol start="2" style="list-style-type: decimal">
<li>What parameters to geom_jitter() control the amount of jittering?</li>
</ol>
<ul>
<li>width and height</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Compare and contrast geom_jitter() with geom_count()</li>
</ol>
<pre class="r"><code> ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + 
      geom_count()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/geomCnt-1.png" width="672" /></p>
<p>Will plot the number of observations at each point as a blob instead of moving the points.</p>
<ol start="4" style="list-style-type: decimal">
<li>What’s the default position adjustment for geom_boxplot()? Create a visualisation of the mpg dataset that demonstrates it.</li>
</ol>
<ul>
<li>position = “dodge2”</li>
</ul>
<pre class="r"><code>mpg %&gt;% ggplot(aes(x = as.factor(cyl), y = hwy, colour = fl)) + geom_boxplot()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/dodge2demo-1.png" width="672" /></p>
</div>
<div id="exercises-3.9-coordinate-systems" class="section level2">
<h2>Exercises 3.9 Coordinate systems</h2>
<ol style="list-style-type: decimal">
<li>Turn a stacked bar chart into a pie chart using coord_polar().</li>
</ol>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = 1, fill = clarity)) + coord_polar(theta = &quot;y&quot;)</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/stack2pol-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does labs() do? Read the documentation.</li>
</ol>
<p>Specify labels! x, y axes, title etc!</p>
<ol start="3" style="list-style-type: decimal">
<li>What’s the difference between coord_quickmap() and coord_map()?</li>
</ol>
<ul>
<li>coord_map() uses the Mercator projection (by default)</li>
<li>coord_quickmap() uses a quick approximation that preserves straight lines, esp for smaller areas closer to the equator.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>What does the plot below tell you about the relationship between city and highway mpg? Why is coord_fixed() important? What does geom_abline() do?</li>
</ol>
<ul>
<li>hwy and cty are linearly related</li>
<li>You always get more mileage on a highway than in the city.</li>
<li>coord_fixed allows you to see this</li>
<li>geom_abline() plots the diagonal reference line</li>
</ul>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
  geom_point() + 
  geom_abline() +
  coord_fixed()</code></pre>
<p><img src="/post/2019-12-23-r-for-data-science-day-2_files/figure-html/3914-1.png" width="672" /></p>
</div>
